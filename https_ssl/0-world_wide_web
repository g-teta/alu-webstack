#!/usr/bin/env bash
# Script that displays information about subdomains

get_subdomain_info() {
    local domain=$1
    local subdomain=$2
    local full_domain="${subdomain}.${domain}"

    # Use dig to query DNS and awk to parse the output
    dig "$full_domain" +short | awk -v sd="$subdomain" '
        NF { 
            # Print only if there is a record
            printf "The subdomain %s is an A record and points to %s\n", sd, $1
        }'
}

# Main script logic
domain=$1
subdomain=$2

if [ -z "$domain" ]; then
    echo "Usage: $0 DOMAIN [SUBDOMAIN]"
    exit 1
fi

if [ -z "$subdomain" ]; then
    # Display info for default subdomains
    get_subdomain_info "$domain" "www"
    get_subdomain_info "$domain" "lb-01"
    get_subdomain_info "$domain" "web-01"
    get_subdomain_info "$domain" "web-02"
else
    # Display info for specified subdomain
    get_subdomain_info "$domain" "$subdomain"
fi
